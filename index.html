<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DFI Secure Gate</title>
<style>
body{
  margin:0;
  background:#000;
  color:#0f0;
  font-family:monospace;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
}
#status{opacity:.6}
</style>
</head>
<body>

<div id="status">Initializing secure environmentâ€¦</div>

<script>

/* =========================================================
   DFI HARD GATE LOADER
   - Silent protection stack
   - Aggregated scoring
   - Conditional content load
   - GitHub static compatible
========================================================= */

const Gate = {
    score: 0,
    signals: 0,
    flags: new Set(),
    ready: false,

    penalize(r,w=1){
        if(!this.flags.has(r)){
            this.flags.add(r);
            this.score+=w;
        }
    },

    reward(){
        this.signals++;
    }
};

/* =============================
   BASIC ENVIRONMENT CHECKS
============================= */

(function(){

    if(navigator.webdriver)
        Gate.penalize("webdriver",5);

    if(/Headless|Phantom|Slimer/i.test(navigator.userAgent))
        Gate.penalize("headless",5);

    if(!navigator.languages?.length)
        Gate.penalize("no_languages",2);

    if(window.outerWidth===0 || window.outerHeight===0)
        Gate.penalize("zero_viewport",3);

    Gate.reward();

})();

/* =============================
   TIMING INTEGRITY
============================= */

(function(){

    const start=performance.now();

    setTimeout(()=>{
        const delta=performance.now()-start;

        if(delta<5)
            Gate.penalize("timer_anomaly",1);

        Gate.reward();
    },200);

})();

/* =============================
   LIGHT BEHAVIOR CHECK
============================= */

(function(){

    let moved=false;

    addEventListener("mousemove",()=>{
        moved=true;
        Gate.reward();
    },{once:true,passive:true});

    setTimeout(()=>{
        if(!moved)
            Gate.penalize("no_movement",2);
    },1500);

})();

/* =============================
   LOAD STACK FILES SILENTLY
============================= */

["1.js","2.js","3.js","4.js","5.js"].forEach(file=>{
    const s=document.createElement("script");
    s.src=file;
    s.defer=true;
    document.head.appendChild(s);
});

/* =============================
   FINAL DECISION
============================= */

setTimeout(()=>{

    const risk =
        Gate.score -
        (Gate.signals * 0.5);

    if(risk < 8){
        loadContent();
    }else{
        document.getElementById("status").innerText =
            "Access restricted.";
    }

},3500);


/* =============================
   LOAD PROTECTED CONTENT
============================= */

function loadContent(){

    fetch("6.html")
    .then(res=>res.text())
    .then(html=>{
        document.body.innerHTML = html;
    })
    .catch(()=>{
        document.getElementById("status").innerText =
            "Load error.";
    });

}

</script>
</body>
</html>
